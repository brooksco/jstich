/**
 * mctabs.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *//*jshint globals: tinyMCEPopup */function MCTabs(){this.settings=[];this.onChange=tinyMCEPopup.editor.windowManager.createInstance("tinymce.util.Dispatcher")}MCTabs.prototype.init=function(e){this.settings=e};MCTabs.prototype.getParam=function(e,t){var n=null;n=typeof this.settings[e]=="undefined"?t:this.settings[e];return n=="true"||n=="false"?n=="true":n};MCTabs.prototype.showTab=function(e){e.className="current";e.setAttribute("aria-selected",!0);e.setAttribute("aria-expanded",!0);e.tabIndex=0};MCTabs.prototype.hideTab=function(e){var t=this;e.className="";e.setAttribute("aria-selected",!1);e.setAttribute("aria-expanded",!1);e.tabIndex=-1};MCTabs.prototype.showPanel=function(e){e.className="current";e.setAttribute("aria-hidden",!1)};MCTabs.prototype.hidePanel=function(e){e.className="panel";e.setAttribute("aria-hidden",!0)};MCTabs.prototype.getPanelForTab=function(e){return tinyMCEPopup.dom.getAttrib(e,"aria-controls")};MCTabs.prototype.displayTab=function(e,t,n){var r,i,s,o,u,a,f,l=this;s=document.getElementById(e);t===undefined&&(t=l.getPanelForTab(s));r=document.getElementById(t);i=r?r.parentNode:null;o=s?s.parentNode:null;u=l.getParam("selection_class","current");if(s&&o){a=o.childNodes;for(f=0;f<a.length;f++)a[f].nodeName=="LI"&&l.hideTab(a[f]);l.showTab(s)}if(r&&i){a=i.childNodes;for(f=0;f<a.length;f++)a[f].nodeName=="DIV"&&l.hidePanel(a[f]);n||s.focus();l.showPanel(r)}};MCTabs.prototype.getAnchor=function(){var e,t=document.location.href;return(e=t.lastIndexOf("#"))!=-1?t.substring(e+1):""};var mcTabs=new MCTabs;tinyMCEPopup.onInit.add(function(){var e=tinyMCEPopup.getWin().tinymce,t=tinyMCEPopup.dom,n=e.each;n(t.select("div.tabs"),function(r){t.setAttrib(r,"role","tablist");var i=tinyMCEPopup.dom.select("li",r),s=function(e){mcTabs.displayTab(e,mcTabs.getPanelForTab(e));mcTabs.onChange.dispatch(e)};n(i,function(e){t.setAttrib(e,"role","tab");t.bind(e,"click",function(t){s(e.id)})});t.bind(t.getRoot(),"keydown",function(t){t.keyCode===9&&t.ctrlKey&&!t.altKey&&e.dom.Event.cancel(t)});n(t.select("a",r),function(e){t.setAttrib(e,"tabindex","-1")})})});