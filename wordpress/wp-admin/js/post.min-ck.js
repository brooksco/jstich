function array_unique_noempty(e){var t=[];return jQuery.each(e,function(e,n){n=jQuery.trim(n),n&&-1==jQuery.inArray(n,t)&&t.push(n)}),t}var tagBox,commentsBox,WPSetThumbnailHTML,WPSetThumbnailID,WPRemoveThumbnail,wptitlehint,makeSlugeditClickable,editPermalink;makeSlugeditClickable=editPermalink=function(){},window.wp=window.wp||{},function(e){var t=!1;tagBox={clean:function(e){var t=postL10n.comma;return","!==t&&(e=e.replace(new RegExp(t,"g"),",")),e=e.replace(/\s*,\s*/g,",").replace(/,+/g,",").replace(/[,\s]+$/,"").replace(/^[,\s]+/,""),","!==t&&(e=e.replace(/,/g,t)),e},parseTags:function(t){var n=t.id,r=n.split("-check-num-")[1],i=e(t).closest(".tagsdiv"),s=i.find(".the-tags"),o=postL10n.comma,u=s.val().split(o),f=[];return delete u[r],e.each(u,function(t,n){n=e.trim(n),n&&f.push(n)}),s.val(this.clean(f.join(o))),this.quickClicks(i),!1},quickClicks:function(t){var n,r,i=e(".the-tags",t),s=e(".tagchecklist",t),o=e(t).attr("id");i.length&&(r=i.prop("disabled"),n=i.val().split(postL10n.comma),s.empty(),e.each(n,function(t,n){var i,u;n=e.trim(n),n&&(i=e("<span />").text(n),r||(u=e('<a id="'+o+"-check-num-"+t+'" class="ntdelbutton">X</a>'),u.click(function(){tagBox.parseTags(this)}),i.prepend("&nbsp;").prepend(u)),s.append(i))}))},flushTags:function(t,n,r){var i,s,o,u=e(".the-tags",t),f=e("input.newtag",t),l=postL10n.comma;return n=n||!1,o=n?e(n).text():f.val(),i=u.val(),s=i?i+l+o:o,s=this.clean(s),s=array_unique_noempty(s.split(l)).join(l),u.val(s),this.quickClicks(t),n||f.val(""),"undefined"==typeof r&&f.focus(),!1},get:function(t){var n=t.substr(t.indexOf("-")+1);e.post(ajaxurl,{action:"get-tagcloud",tax:n},function(r,i){(0===r||"success"!=i)&&(r=wpAjax.broken),r=e('<p id="tagcloud-'+n+'" class="the-tagcloud">'+r+"</p>"),e("a",r).click(function(){return tagBox.flushTags(e(this).closest(".inside").children(".tagsdiv"),this),!1}),e("#"+t).after(r)})},init:function(){var t=this,n=e("div.ajaxtag");e(".tagsdiv").each(function(){tagBox.quickClicks(this)}),e("input.tagadd",n).click(function(){t.flushTags(e(this).closest(".tagsdiv"))}),e("div.taghint",n).click(function(){e(this).css("visibility","hidden").parent().siblings(".newtag").focus()}),e("input.newtag",n).blur(function(){""===this.value&&e(this).parent().siblings(".taghint").css("visibility","")}).focus(function(){e(this).parent().siblings(".taghint").css("visibility","hidden")}).keyup(function(t){return 13==t.which?(tagBox.flushTags(e(this).closest(".tagsdiv")),!1):void 0}).keypress(function(e){return 13==e.which?(e.preventDefault(),!1):void 0}).each(function(){var t=e(this).closest("div.tagsdiv").attr("id");e(this).suggest(ajaxurl+"?action=ajax-tag-search&tax="+t,{delay:500,minchars:2,multiple:!0,multipleSep:postL10n.comma+" "})}),e("#post").submit(function(){e("div.tagsdiv").each(function(){tagBox.flushTags(this,!1,1)})}),e("a.tagcloud-link").click(function(){return tagBox.get(e(this).attr("id")),e(this).unbind().click(function(){return e(this).siblings(".the-tagcloud").toggle(),!1}),!1})}},commentsBox={st:0,get:function(t,n){var r,i=this.st;return n||(n=20),this.st+=n,this.total=t,e("#commentsdiv .spinner").show(),r={action:"get-comments",mode:"single",_ajax_nonce:e("#add_comment_nonce").val(),p:e("#post_ID").val(),start:i,number:n},e.post(ajaxurl,r,function(t){return t=wpAjax.parseAjaxResponse(t),e("#commentsdiv .widefat").show(),e("#commentsdiv .spinner").hide(),"object"==typeof t&&t.responses[0]?(e("#the-comment-list").append(t.responses[0].data),theList=theExtraList=null,e("a[className*=':']").unbind(),void (commentsBox.st>commentsBox.total?e("#show-comments").hide():e("#show-comments").show().children("a").html(postL10n.showcomm))):1==t?void e("#show-comments").html(postL10n.endcomm):void e("#the-comment-list").append('<tr><td colspan="2">'+wpAjax.broken+"</td></tr>")}),!1}},WPSetThumbnailHTML=function(t){e(".inside","#postimagediv").html(t)},WPSetThumbnailID=function(t){var n=e('input[value="_thumbnail_id"]',"#list-table");n.size()>0&&e("#meta\\["+n.attr("id").match(/[0-9]+/)+"\\]\\[value\\]").text(t)},WPRemoveThumbnail=function(t){e.post(ajaxurl,{action:"set-post-thumbnail",post_id:e("#post_ID").val(),thumbnail_id:-1,_ajax_nonce:t,cookie:encodeURIComponent(document.cookie)},function(e){"0"==e?alert(setPostThumbnailL10n.error):WPSetThumbnailHTML(e)})},e(document).on("heartbeat-send.refresh-lock",function(t,n){var r=e("#active_post_lock").val(),i=e("#post_ID").val(),s={};i&&e("#post-lock-dialog").length&&(s.post_id=i,r&&(s.lock=r),n["wp-refresh-post-lock"]=s)}).on("heartbeat-tick.refresh-lock",function(t,n){var r,i,s;n["wp-refresh-post-lock"]&&(r=n["wp-refresh-post-lock"],r.lock_error?(i=e("#post-lock-dialog"),i.length&&!i.is(":visible")&&(wp.autosave&&(e(document).one("heartbeat-tick",function(){wp.autosave.server.suspend(),i.removeClass("saving").addClass("saved"),e(window).off("beforeunload.edit-post")}),i.addClass("saving"),wp.autosave.server.triggerSave()),r.lock_error.avatar_src&&(s=e('<img class="avatar avatar-64 photo" width="64" height="64" />').attr("src",r.lock_error.avatar_src.replace(/&amp;/g,"&")),i.find("div.post-locked-avatar").empty().append(s)),i.show().find(".currently-editing").text(r.lock_error.text),i.find(".wp-tab-first").focus())):r.new_lock&&e("#active_post_lock").val(r.new_lock))}).on("before-autosave.update-post-slug",function(){t=document.activeElement&&"title"===document.activeElement.id}).on("after-autosave.update-post-slug",function(){e("#edit-slug-box > *").length||t||e.post(ajaxurl,{action:"sample-permalink",post_id:e("#post_ID").val(),new_title:e("#title").val(),samplepermalinknonce:e("#samplepermalinknonce").val()},function(t){"-1"!=t&&e("#edit-slug-box").html(t)})})}(jQuery),function(e){function t(){n=!1,window.clearTimeout(r),r=window.setTimeout(function(){n=!0},3e5)}var n,r;e(document).on("heartbeat-send.wp-refresh-nonces",function(t,r){var i,s;n&&(s=e("#post_ID").val())&&(i=e("#_wpnonce").val())&&(r["wp-refresh-post-nonces"]={post_id:s,post_nonce:i})}).on("heartbeat-tick.wp-refresh-nonces",function(n,r){var i=r["wp-refresh-post-nonces"];i&&(t(),i.replace&&e.each(i.replace,function(t,n){e("#"+t).val(n)}),i.heartbeatNonce&&(window.heartbeatSettings.nonce=i.heartbeatNonce))}).ready(function(){t()})}(jQuery),jQuery(document).ready(function(e){function t(){var t,n,r=0,i=e("#editable-post-name"),s=i.html(),o=e("#post_name"),u=o.val(),a=e("#edit-slug-buttons"),f=a.html(),l=e("#editable-post-name-full").html();for(e("#view-post-btn").hide(),a.html('<a href="#" class="save button button-small">'+postL10n.ok+'</a> <a class="cancel" href="#">'+postL10n.cancel+"</a>"),a.children(".save").click(function(){var t=i.children("input").val();return t==e("#editable-post-name-full").text()?e("#edit-slug-buttons .cancel").click():(e.post(ajaxurl,{action:"sample-permalink",post_id:h,new_slug:t,new_title:e("#title").val(),samplepermalinknonce:e("#samplepermalinknonce").val()},function(n){var r=e("#edit-slug-box");r.html(n),r.hasClass("hidden")&&r.fadeIn("fast",function(){r.removeClass("hidden")}),a.html(f),o.val(t),e("#view-post-btn").show()}),!1)}),e("#edit-slug-buttons .cancel").click(function(){return e("#view-post-btn").show(),i.html(s),a.html(f),o.val(u),!1}),t=0;t<l.length;++t)"%"==l.charAt(t)&&r++;n=r>l.length/4?"":l,i.html('<input type="text" id="new-post-slug" value="'+n+'" />').children("input").keypress(function(e){var t=e.keyCode||0;return 13==t?(a.children(".save").click(),!1):27==t?(a.children(".cancel").click(),!1):void 0}).keyup(function(){o.val(this.value)}).focus()}var n,r,i,s,o,u="",a=0,f=e("#content"),l=e(document),c=e("#edit-slug-box"),h=e("#post_ID").val()||0,p=e("#submitpost"),d=!0,v=e("#post-visibility-select"),m=e("#timestampdiv"),g=e("#post-status-select");postboxes.add_postbox_toggles(pagenow),window.name="",e("#post-lock-dialog .notification-dialog").on("keydown",function(t){if(9==t.which){var n=e(t.target);n.hasClass("wp-tab-first")&&t.shiftKey?(e(this).find(".wp-tab-last").focus(),t.preventDefault()):n.hasClass("wp-tab-last")&&!t.shiftKey&&(e(this).find(".wp-tab-first").focus(),t.preventDefault())}}).filter(":visible").find(".wp-tab-first").focus(),wp.heartbeat&&e("#post-lock-dialog").length&&wp.heartbeat.interval(15),i=p.find(":button, :submit, a.submitdelete, #post-preview").on("click.edit-post",function(t){var n=e(this);return n.hasClass("disabled")?void t.preventDefault():void (n.hasClass("submitdelete")||n.is("#post-preview")||e("form#post").off("submit.edit-post").on("submit.edit-post",function(t){t.isDefaultPrevented()||(wp.autosave&&wp.autosave.server.suspend(),d=!1,e(window).off("beforeunload.edit-post"),i.addClass("disabled"),"publish"===n.attr("id")?p.find("#major-publishing-actions .spinner").show():p.find("#minor-publishing .spinner").show())}))}),e("#post-preview").on("click.post-preview",function(t){var n=e(this),r=e("form#post"),i=e("input#wp-preview"),s=n.attr("target")||"wp-preview",o=navigator.userAgent.toLowerCase();t.preventDefault(),n.hasClass("disabled")||(wp.autosave&&wp.autosave.server.tempBlockSave(),i.val("dopreview"),r.attr("target",s).submit().attr("target",""),-1!==o.indexOf("safari")&&-1===o.indexOf("chrome")&&r.attr("action",function(e,t){return t+"?t="+(new Date).getTime()}),i.val(""))}),e("#title").on("keydown.editor-focus",function(t){var n,r;if(9===t.keyCode&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){if(n="undefined"!=typeof tinymce&&tinymce.get("content"),r=e("#content"),n&&!n.isHidden())n.focus();else{if(!r.length)return;r.focus()}t.preventDefault()}}),e("#auto_draft").val()&&e("#title").blur(function(){var t;this.value&&!e("#edit-slug-box > *").length&&(e("form#post").one("submit",function(){t=!0}),window.setTimeout(function(){!t&&wp.autosave&&wp.autosave.server.triggerSave()},200))}),l.on("autosave-disable-buttons.edit-post",function(){i.addClass("disabled")}).on("autosave-enable-buttons.edit-post",function(){wp.heartbeat&&wp.heartbeat.hasConnectionError()||i.removeClass("disabled")}).on("before-autosave.edit-post",function(){e(".autosave-message").text(postL10n.savingText)}).on("after-autosave.edit-post",function(t,n){e(".autosave-message").text(n.message)}),e(window).on("beforeunload.edit-post",function(){var e="undefined"!=typeof tinymce&&tinymce.get("content");return e&&!e.isHidden()&&e.isDirty()||wp.autosave&&wp.autosave.server.postChanged()?postL10n.saveAlert:void 0}).on("unload.edit-post",function(t){d&&(t.target&&"#document"!=t.target.nodeName||e.ajax({type:"POST",url:ajaxurl,async:!1,data:{action:"wp-remove-post-lock",_wpnonce:e("#_wpnonce").val(),post_ID:e("#post_ID").val(),active_post_lock:e("#active_post_lock").val()}}))}),e("#tagsdiv-post_tag").length?tagBox.init():e("#side-sortables, #normal-sortables, #advanced-sortables").children("div.postbox").each(function(){return 0===this.id.indexOf("tagsdiv-")?(tagBox.init(),!1):void 0}),e(".categorydiv").each(function(){var t,n,r,i,s,o=e(this).attr("id");r=o.split("-"),r.shift(),i=r.join("-"),s=i+"_tab","category"==i&&(s="cats"),e("a","#"+i+"-tabs").click(function(){var t=e(this).attr("href");return e(this).parent().addClass("tabs").siblings("li").removeClass("tabs"),e("#"+i+"-tabs").siblings(".tabs-panel").hide(),e(t).show(),"#"+i+"-all"==t?deleteUserSetting(s):setUserSetting(s,"pop"),!1}),getUserSetting(s)&&e('a[href="#'+i+'-pop"]',"#"+i+"-tabs").click(),e("#new"+i).one("focus",function(){e(this).val("").removeClass("form-input-tip")}),e("#new"+i).keypress(function(t){13===t.keyCode&&(t.preventDefault(),e("#"+i+"-add-submit").click())}),e("#"+i+"-add-submit").click(function(){e("#new"+i).focus()}),t=function(t){return e("#new"+i).val()?(t.data+="&"+e(":checked","#"+i+"checklist").serialize(),e("#"+i+"-add-submit").prop("disabled",!0),t):!1},n=function(t,n){var r,s=e("#new"+i+"_parent");e("#"+i+"-add-submit").prop("disabled",!1),"undefined"!=n.parsed.responses[0]&&(r=n.parsed.responses[0].supplemental.newcat_parent)&&(s.before(r),s.remove())},e("#"+i+"checklist").wpList({alt:"",response:i+"-ajax-response",addBefore:t,addAfter:n}),e("#"+i+"-add-toggle").click(function(){return e("#"+i+"-adder").toggleClass("wp-hidden-children"),e('a[href="#'+i+'-all"]',"#"+i+"-tabs").click(),e("#new"+i).focus(),!1}),e("#"+i+"checklist, #"+i+"checklist-pop").on("click",'li.popular-category > label input[type="checkbox"]',function(){var t=e(this),n=t.is(":checked"),r=t.val();r&&t.parents("#taxonomy-"+i).length&&e("#in-"+i+"-"+r+", #in-popular-"+i+"-"+r).prop("checked",n)})}),e("#postcustom").length&&e("#the-list").wpList({addAfter:function(){e("table#list-table").show()},addBefore:function(t){return t.data+="&post_id="+e("#post_ID").val(),t}}),e("#submitdiv").length&&(n=e("#timestamp").html(),r=e("#post-visibility-display").html(),s=function(){"public"!=v.find("input:radio:checked").val()?(e("#sticky").prop("checked",!1),e("#sticky-span").hide()):e("#sticky-span").show(),"password"!=v.find("input:radio:checked").val()?e("#password-span").hide():e("#password-span").show()},o=function(){if(!m.length)return!0;var t,r,i,s,o=e("#post_status"),u=e('option[value="publish"]',o),a=e("#aa").val(),f=e("#mm").val(),l=e("#jj").val(),c=e("#hh").val(),h=e("#mn").val();return t=new Date(a,f-1,l,c,h),r=new Date(e("#hidden_aa").val(),e("#hidden_mm").val()-1,e("#hidden_jj").val(),e("#hidden_hh").val(),e("#hidden_mn").val()),i=new Date(e("#cur_aa").val(),e("#cur_mm").val()-1,e("#cur_jj").val(),e("#cur_hh").val(),e("#cur_mn").val()),t.getFullYear()!=a||1+t.getMonth()!=f||t.getDate()!=l||t.getMinutes()!=h?(m.find(".timestamp-wrap").addClass("form-invalid"),!1):(m.find(".timestamp-wrap").removeClass("form-invalid"),t>i&&"future"!=e("#original_post_status").val()?(s=postL10n.publishOnFuture,e("#publish").val(postL10n.schedule)):i>=t&&"publish"!=e("#original_post_status").val()?(s=postL10n.publishOn,e("#publish").val(postL10n.publish)):(s=postL10n.publishOnPast,e("#publish").val(postL10n.update)),e("#timestamp").html(r.toUTCString()==t.toUTCString()?n:s+" <b>"+postL10n.dateFormat.replace("%1$s",e('option[value="'+e("#mm").val()+'"]',"#mm").text()).replace("%2$s",l).replace("%3$s",a).replace("%4$s",c).replace("%5$s",h)+"</b> "),"private"==v.find("input:radio:checked").val()?(e("#publish").val(postL10n.update),0===u.length?o.append('<option value="publish">'+postL10n.privatelyPublished+"</option>"):u.html(postL10n.privatelyPublished),e('option[value="publish"]',o).prop("selected",!0),e("#misc-publishing-actions .edit-post-status").hide()):("future"==e("#original_post_status").val()||"draft"==e("#original_post_status").val()?u.length&&(u.remove(),o.val(e("#hidden_post_status").val())):u.html(postL10n.published),o.is(":hidden")&&e("#misc-publishing-actions .edit-post-status").show()),e("#post-status-display").html(e("option:selected",o).text()),"private"==e("option:selected",o).val()||"publish"==e("option:selected",o).val()?e("#save-post").hide():(e("#save-post").show(),e("#save-post").show().val("pending"==e("option:selected",o).val()?postL10n.savePending:postL10n.saveDraft)),!0)},e("#visibility .edit-visibility").click(function(){return v.is(":hidden")&&(s(),v.slideDown("fast").find('input[type="radio"]').first().focus(),e(this).hide()),!1}),v.find(".cancel-post-visibility").click(function(t){v.slideUp("fast"),e("#visibility-radio-"+e("#hidden-post-visibility").val()).prop("checked",!0),e("#post_password").val(e("#hidden-post-password").val()),e("#sticky").prop("checked",e("#hidden-post-sticky").prop("checked")),e("#post-visibility-display").html(r),e("#visibility .edit-visibility").show().focus(),o(),t.preventDefault()}),v.find(".save-post-visibility").click(function(t){v.slideUp("fast"),e("#visibility .edit-visibility").show(),o(),"public"!=v.find("input:radio:checked").val()&&e("#sticky").prop("checked",!1),u=e("#sticky").prop("checked")?"Sticky":"",e("#post-visibility-display").html(postL10n[v.find("input:radio:checked").val()+u]),t.preventDefault()}),v.find("input:radio").change(function(){s()}),m.siblings("a.edit-timestamp").click(function(t){m.is(":hidden")&&(m.slideDown("fast"),e("#mm").focus(),e(this).hide()),t.preventDefault()}),m.find(".cancel-timestamp").click(function(t){m.slideUp("fast").siblings("a.edit-timestamp").show().focus(),e("#mm").val(e("#hidden_mm").val()),e("#jj").val(e("#hidden_jj").val()),e("#aa").val(e("#hidden_aa").val()),e("#hh").val(e("#hidden_hh").val()),e("#mn").val(e("#hidden_mn").val()),o(),t.preventDefault()}),m.find(".save-timestamp").click(function(e){o()&&(m.slideUp("fast"),m.siblings("a.edit-timestamp").show()),e.preventDefault()}),e("#post").on("submit",function(t){o()||(t.preventDefault(),m.show(),wp.autosave&&wp.autosave.enableButtons(),e("#publishing-action .spinner").hide())}),g.siblings("a.edit-post-status").click(function(t){g.is(":hidden")&&(g.slideDown("fast").find("select").focus(),e(this).hide()),t.preventDefault()}),g.find(".save-post-status").click(function(e){g.slideUp("fast").siblings("a.edit-post-status").show(),o(),e.preventDefault()}),g.find(".cancel-post-status").click(function(t){e("#post-status-select").slideUp("fast").siblings("a.edit-post-status").show().focus(),e("#post_status").val(e("#hidden_post_status").val()),o(),t.preventDefault()})),c.length&&c.on("click",function(n){var r=e(n.target);(r.is("#editable-post-name")||r.hasClass("edit-slug"))&&t()}),"undefined"!=typeof wpWordCount&&(l.triggerHandler("wpcountwords",[f.val()]),f.keyup(function(e){var t=e.keyCode||e.charCode;return t==a?!0:((13==t||8==a||46==a)&&l.triggerHandler("wpcountwords",[f.val()]),a=t,!0)})),wptitlehint=function(t){t=t||"title";var n=e("#"+t),r=e("#"+t+"-prompt-text");""===n.val()&&r.removeClass("screen-reader-text"),r.click(function(){e(this).addClass("screen-reader-text"),n.focus()}),n.blur(function(){""===this.value&&r.removeClass("screen-reader-text")}).focus(function(){r.addClass("screen-reader-text")}).keydown(function(t){r.addClass("screen-reader-text"),e(this).unbind(t)})},wptitlehint(),function(){function t(e){s?r.theme.resizeTo(null,i+e.pageY):o.height(Math.max(50,i+e.pageY)),e.preventDefault()}function n(){var t,n;s?(r.focus(),n=e("#wp-content-editor-container .mce-toolbar-grp").height(),(10>n||n>200)&&(n=30),t=parseInt(e("#content_ifr").css("height"),10)+n-28):(o.focus(),t=parseInt(o.css("height"),10)),l.off(".wp-editor-resize"),t&&t>50&&5e3>t&&setUserSetting("ed_size",t)}var r,i,s,o=e("textarea#content"),u=e("#post-status-info");!o.length||"ontouchstart"in window||(o.css("resize","none"),u.on("mousedown.wp-editor-resize",function(u){"undefined"!=typeof tinymce&&(r=tinymce.get("content")),r&&!r.isHidden()?(s=!0,i=e("#content_ifr").height()-u.pageY):(s=!1,i=o.height()-u.pageY,o.blur()),l.on("mousemove.wp-editor-resize",t).on("mouseup.wp-editor-resize mouseleave.wp-editor-resize",n),u.preventDefault()}).on("mouseup.wp-editor-resize",n))}(),"undefined"!=typeof tinymce&&e("#post-formats-select input.post-format").on("change.set-editor-class",function(){var t,n,r=this.id;r&&e(this).prop("checked")&&(t=tinymce.get("content"),t&&(n=t.getBody(),n.className=n.className.replace(/\bpost-format-[^ ]+/,""),t.dom.addClass(n,"post-format-0"==r?"post-format-standard":r)))})});